function sendYandexGoal(a){yaCounter37696905.reachGoal(a),ga("send","pageview","/"+a+".html")}function myValidateForm(a){a.find(".req"),a.find(".req").removeClass("error");var e=!0;return a.find(".req").each(function(r,n){var t=$(n);if(""==t.val()&&($(n).addClass("error"),e=!1),"checkbox"==t.attr("type")&&0==t.prop("checked")&&($(n).addClass("error"),e=!1),"EMAIL"===t.attr("name")&&""===t.val()||"EMAIL"!==t.attr("name")||isValidEmailAddress(t.val())||($(n).addClass("error"),e=!1),"PASSWORD"===t.attr("name")){var i=!1;""===t.val()||t.val().length<6&&(i=!0),i&&($(n).addClass("error"),e=!1)}if("CONFIRM_PASSWORD"===t.attr("name")){var d=!1,s=a.find(".req[name=PASSWORD]");""===t.val()||t.val()!==s.val()&&(d=!0),d&&($(n).addClass("error"),e=!1)}}),e}function SendAjax(a,e,r){r=r||function(){},$.ajax({url:"/ajax.php",dataType:"json",type:"POST",data:{action:a,data:e},error:function(a){console.log(a)}}).done(function(a){r(a)})}function isValidEmailAddress(a){var e=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return e.test(a)}$.fn.serializeObject=function(){var a=this,e={},r={},n={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(a,e,r){return a[e]=r,a},this.push_counter=function(a){return void 0===r[a]&&(r[a]=0),r[a]++},$.each($(this).serializeArray(),function(){if(n.validate.test(this.name)){for(var r,t=this.name.match(n.key),i=this.value,d=this.name;void 0!==(r=t.pop());)d=d.replace(new RegExp("\\["+r+"\\]$"),""),r.match(n.push)?i=a.build([],a.push_counter(d),i):r.match(n.fixed)?i=a.build([],r,i):r.match(n.named)&&(i=a.build({},r,i));e=$.extend(!0,e,i)}}),e};
$(document).ready(function(){$(".js-slider-main").slick({dots:!0,infinite:!0,speed:300,slidesToShow:1,arrows:!1,fade:!0}),$(".js-scrollbar").mCustomScrollbar(),$("[name=PHONE]").mask("+7(999)-999-99-99"),$("body").on("submit",".js-form-submit",function(t){t.preventDefault();var i=$(this);if(!myValidateForm(i))return!1;var s=i.serializeObject();SendAjax("SEND_FORM",s,function(t){i.html(t.html)})}),$("body").on("blur",".js-form-submit input",function(){var t=$(this).closest(".js-form-submit");if(!myValidateForm(t))return!1})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bmN0aW9ucy5qcyIsInNjcmlwdHMuanMiXSwibmFtZXMiOlsic2VuZFlhbmRleEdvYWwiLCJfdGFyZ2V0IiwieWFDb3VudGVyMzc2OTY5MDUiLCJyZWFjaEdvYWwiLCJnYSIsIm15VmFsaWRhdGVGb3JtIiwiZm9ybSIsImZpbmQiLCJyZW1vdmVDbGFzcyIsIl92YWxpZCIsImVhY2giLCJpbmRleCIsImVsIiwiX2lucHV0IiwiJCIsInZhbCIsImFkZENsYXNzIiwiYXR0ciIsInByb3AiLCJpc1ZhbGlkRW1haWxBZGRyZXNzIiwiX2hhc19wYXNzd29yZF9lcnJvciIsImxlbmd0aCIsIl9oYXNfcGFzc3dvcmRfY29uZmlybV9lcnJvciIsIl9wYXNzd29yZCIsIlNlbmRBamF4IiwiX2FjdGlvbiIsIl9kYXRhIiwiX2NhbGxCYWNrIiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwidHlwZSIsImRhdGEiLCJhY3Rpb24iLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJkb25lIiwiZW1haWxBZGRyZXNzIiwicGF0dGVybiIsIlJlZ0V4cCIsInRlc3QiLCJmbiIsInNlcmlhbGl6ZU9iamVjdCIsInNlbGYiLCJ0aGlzIiwianNvbiIsInB1c2hfY291bnRlcnMiLCJwYXR0ZXJucyIsInZhbGlkYXRlIiwia2V5IiwicHVzaCIsImZpeGVkIiwibmFtZWQiLCJidWlsZCIsImJhc2UiLCJ2YWx1ZSIsInB1c2hfY291bnRlciIsInVuZGVmaW5lZCIsInNlcmlhbGl6ZUFycmF5IiwibmFtZSIsImsiLCJrZXlzIiwibWF0Y2giLCJtZXJnZSIsInJldmVyc2Vfa2V5IiwicG9wIiwicmVwbGFjZSIsImV4dGVuZCIsImRvY3VtZW50IiwicmVhZHkiLCJzbGljayIsImRvdHMiLCJpbmZpbml0ZSIsInNwZWVkIiwic2xpZGVzVG9TaG93IiwiYXJyb3dzIiwiZmFkZSIsIm1DdXN0b21TY3JvbGxiYXIiLCJtYXNrIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJfZm9ybSIsImh0bWwi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QUFVTyxFQUFHRyxHQUdsQ2xCLEdBQU9oQyxFQUFFc0QsUUFBQUEsRUFBYXRCLEVBQU1rQixNQUV6QmxCO0FDM0hYaEMsRUFBRXVELFVBQVVDLE1BQU0sV0FDZHhELEVBQUUsbUJBQW1CeUQsT0FDakJDLE1BQUFBLEVBQ0FDLFVBQUFBLEVBQ0FDLE1BQU8sSUFDUEMsYUFBYyxFQUNkQyxRQUFBQSxFQUNBQyxNQUFBQSxJQUVKL0QsRUFBRSxpQkFBaUJnRSxtQkFDbkJoRSxFQUFFLGdCQUFnQmlFLEtBQUsscUJBRXZCakUsRUFBRSxRQUFRa0UsR0FBRyxTQUFVLGtCQUFtQixTQUFVQyxHQUNoREEsRUFBRUMsZ0JBQ0YsSUFBSUMsR0FBUXJFLEVBQUUrQixLQUNkLEtBQUt4QyxlQUFlOEUsR0FDaEIsT0FBQSxDQUVKLElBQUl6RCxHQUFReUQsRUFBTXhDLGlCQUNsQm5CLFVBQVMsWUFBYUUsRUFBTyxTQUFVTSxHQUNuQ21ELEVBQU1DLEtBQUtwRCxFQUFLb0QsVUFJeEJ0RSxFQUFFLFFBQVFrRSxHQUFHLE9BQVEsd0JBQXlCLFdBQzFDLEdBQUlHLEdBQVFyRSxFQUFFK0IsTUFBTXdDLFFBQVEsa0JBQzVCLEtBQUtoRixlQUFlOEUsR0FDaEIsT0FBQSIsImZpbGUiOiJhbGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gc2VuZFlhbmRleEdvYWwoX3RhcmdldCkge1xyXG4gICAgeWFDb3VudGVyMzc2OTY5MDUucmVhY2hHb2FsKF90YXJnZXQpO1xyXG4gICAgZ2EoJ3NlbmQnLCAncGFnZXZpZXcnLCAnLycgKyBfdGFyZ2V0ICsgJy5odG1sJyk7XHJcbn1cclxuZnVuY3Rpb24gbXlWYWxpZGF0ZUZvcm0oZm9ybSkge1xyXG4gICAgdmFyIF9pdGVtcyA9IGZvcm0uZmluZChcIi5yZXFcIik7XHJcbiAgICBmb3JtLmZpbmQoXCIucmVxXCIpLnJlbW92ZUNsYXNzKFwiZXJyb3JcIik7XHJcbiAgICB2YXIgX3ZhbGlkID0gdHJ1ZTtcclxuICAgIGZvcm0uZmluZCgnLnJlcScpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbCkgeyAvKtC/0YDQvtCy0LXRgNC60LAg0LfQsNC/0L7Qu9C90LXQvdC40Y8qL1xyXG4gICAgICAgIHZhciBfaW5wdXQgPSAkKGVsKTtcclxuICAgICAgICBpZiAoX2lucHV0LnZhbCgpID09IFwiXCIpIHtcclxuICAgICAgICAgICAgJChlbCkuYWRkQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgIF92YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX2lucHV0LmF0dHIoXCJ0eXBlXCIpID09IFwiY2hlY2tib3hcIiAmJiBfaW5wdXQucHJvcChcImNoZWNrZWRcIikgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgJChlbCkuYWRkQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgIF92YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX2lucHV0LmF0dHIoXCJuYW1lXCIpID09PSBcIkVNQUlMXCIgJiYgX2lucHV0LnZhbCgpID09PSBcIlwiKSB7XHJcbiAgICAgICAgfSBlbHNlIGlmIChfaW5wdXQuYXR0cihcIm5hbWVcIikgPT09IFwiRU1BSUxcIiAmJiAhaXNWYWxpZEVtYWlsQWRkcmVzcyhfaW5wdXQudmFsKCkpKSB7XHJcbiAgICAgICAgICAgICQoZWwpLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICAgICBfdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKF9pbnB1dC5hdHRyKFwibmFtZVwiKSA9PT0gXCJQQVNTV09SRFwiKSB7XHJcbiAgICAgICAgICAgIHZhciBfaGFzX3Bhc3N3b3JkX2Vycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChfaW5wdXQudmFsKCkgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChfaW5wdXQudmFsKCkubGVuZ3RoIDwgNikge1xyXG4gICAgICAgICAgICAgICAgX2hhc19wYXNzd29yZF9lcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKF9oYXNfcGFzc3dvcmRfZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICQoZWwpLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgX3ZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKF9pbnB1dC5hdHRyKFwibmFtZVwiKSA9PT0gXCJDT05GSVJNX1BBU1NXT1JEXCIpIHtcclxuICAgICAgICAgICAgdmFyIF9oYXNfcGFzc3dvcmRfY29uZmlybV9lcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgX3Bhc3N3b3JkID0gZm9ybS5maW5kKFwiLnJlcVtuYW1lPVBBU1NXT1JEXVwiKTtcclxuICAgICAgICAgICAgaWYgKF9pbnB1dC52YWwoKSA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKF9pbnB1dC52YWwoKSAhPT0gX3Bhc3N3b3JkLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICBfaGFzX3Bhc3N3b3JkX2NvbmZpcm1fZXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfaGFzX3Bhc3N3b3JkX2NvbmZpcm1fZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICQoZWwpLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgX3ZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBfdmFsaWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFNlbmRBamF4KF9hY3Rpb24sIF9kYXRhLCBfY2FsbEJhY2spIHtcclxuICAgIF9jYWxsQmFjayA9IF9jYWxsQmFjayB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYWpheC5waHAnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgJ2FjdGlvbic6IF9hY3Rpb24sXHJcbiAgICAgICAgICAgICdkYXRhJzogX2RhdGFcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICB9LFxyXG4gICAgfSkuZG9uZShmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIF9jYWxsQmFjayhkYXRhKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc1ZhbGlkRW1haWxBZGRyZXNzKGVtYWlsQWRkcmVzcykge1xyXG4gICAgdmFyIHBhdHRlcm4gPSBuZXcgUmVnRXhwKC9eKChcIltcXHctXFxzXStcIil8KFtcXHctXSsoPzpcXC5bXFx3LV0rKSopfChcIltcXHctXFxzXStcIikoW1xcdy1dKyg/OlxcLltcXHctXSspKikpKEAoKD86W1xcdy1dK1xcLikqXFx3W1xcdy1dezAsNjZ9KVxcLihbYS16XXsyLDZ9KD86XFwuW2Etel17Mn0pPykkKXwoQFxcWz8oKDI1WzAtNV1cXC58MlswLTRdWzAtOV1cXC58MVswLTldezJ9XFwufFswLTldezEsMn1cXC4pKSgoMjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV17Mn18WzAtOV17MSwyfSlcXC4pezJ9KDI1WzAtNV18MlswLTRdWzAtOV18MVswLTldezJ9fFswLTldezEsMn0pXFxdPyQpL2kpO1xyXG4gICAgcmV0dXJuIHBhdHRlcm4udGVzdChlbWFpbEFkZHJlc3MpO1xyXG59XHJcblxyXG5cclxuJC5mbi5zZXJpYWxpemVPYmplY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIGpzb24gPSB7fSxcclxuICAgICAgICAgICAgcHVzaF9jb3VudGVycyA9IHt9LFxyXG4gICAgICAgICAgICBwYXR0ZXJucyA9IHtcclxuICAgICAgICAgICAgICAgIFwidmFsaWRhdGVcIjogL15bYS16QS1aXVthLXpBLVowLTlfXSooPzpcXFsoPzpcXGQqfFthLXpBLVowLTlfXSspXFxdKSokLyxcclxuICAgICAgICAgICAgICAgIFwia2V5XCI6IC9bYS16QS1aMC05X10rfCg/PVxcW1xcXSkvZyxcclxuICAgICAgICAgICAgICAgIFwicHVzaFwiOiAvXiQvLFxyXG4gICAgICAgICAgICAgICAgXCJmaXhlZFwiOiAvXlxcZCskLyxcclxuICAgICAgICAgICAgICAgIFwibmFtZWRcIjogL15bYS16QS1aMC05X10rJC9cclxuICAgICAgICAgICAgfTtcclxuICAgIHRoaXMuYnVpbGQgPSBmdW5jdGlvbiAoYmFzZSwga2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIGJhc2Vba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiBiYXNlO1xyXG4gICAgfTtcclxuICAgIHRoaXMucHVzaF9jb3VudGVyID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGlmIChwdXNoX2NvdW50ZXJzW2tleV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBwdXNoX2NvdW50ZXJzW2tleV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHVzaF9jb3VudGVyc1trZXldKys7XHJcbiAgICB9O1xyXG4gICAgJC5lYWNoKCQodGhpcykuc2VyaWFsaXplQXJyYXkoKSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHNraXAgaW52YWxpZCBrZXlzXHJcbiAgICAgICAgaWYgKCFwYXR0ZXJucy52YWxpZGF0ZS50ZXN0KHRoaXMubmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgayxcclxuICAgICAgICAgICAgICAgIGtleXMgPSB0aGlzLm5hbWUubWF0Y2gocGF0dGVybnMua2V5KSxcclxuICAgICAgICAgICAgICAgIG1lcmdlID0gdGhpcy52YWx1ZSxcclxuICAgICAgICAgICAgICAgIHJldmVyc2Vfa2V5ID0gdGhpcy5uYW1lO1xyXG4gICAgICAgIHdoaWxlICgoayA9IGtleXMucG9wKCkpICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgLy8gYWRqdXN0IHJldmVyc2Vfa2V5XHJcbiAgICAgICAgICAgIHJldmVyc2Vfa2V5ID0gcmV2ZXJzZV9rZXkucmVwbGFjZShuZXcgUmVnRXhwKFwiXFxcXFtcIiArIGsgKyBcIlxcXFxdJFwiKSwgJycpO1xyXG4gICAgICAgICAgICAvLyBwdXNoXHJcbiAgICAgICAgICAgIGlmIChrLm1hdGNoKHBhdHRlcm5zLnB1c2gpKSB7XHJcbiAgICAgICAgICAgICAgICBtZXJnZSA9IHNlbGYuYnVpbGQoW10sIHNlbGYucHVzaF9jb3VudGVyKHJldmVyc2Vfa2V5KSwgbWVyZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGZpeGVkXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGsubWF0Y2gocGF0dGVybnMuZml4ZWQpKSB7XHJcbiAgICAgICAgICAgICAgICBtZXJnZSA9IHNlbGYuYnVpbGQoW10sIGssIG1lcmdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBuYW1lZFxyXG4gICAgICAgICAgICBlbHNlIGlmIChrLm1hdGNoKHBhdHRlcm5zLm5hbWVkKSkge1xyXG4gICAgICAgICAgICAgICAgbWVyZ2UgPSBzZWxmLmJ1aWxkKHt9LCBrLCBtZXJnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAganNvbiA9ICQuZXh0ZW5kKHRydWUsIGpzb24sIG1lcmdlKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGpzb247XHJcbn07IiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnLmpzLXNsaWRlci1tYWluJykuc2xpY2soe1xyXG4gICAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgICAgaW5maW5pdGU6IHRydWUsXHJcbiAgICAgICAgc3BlZWQ6IDMwMCxcclxuICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgICBmYWRlOiB0cnVlLFxyXG4gICAgfSk7XHJcbiAgICAkKFwiLmpzLXNjcm9sbGJhclwiKS5tQ3VzdG9tU2Nyb2xsYmFyKCk7XHJcbiAgICAkKCdbbmFtZT1QSE9ORV0nKS5tYXNrKFwiKzcoOTk5KS05OTktOTktOTlcIik7XHJcblxyXG4gICAgJChcImJvZHlcIikub24oXCJzdWJtaXRcIiwgXCIuanMtZm9ybS1zdWJtaXRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIF9mb3JtID0gJCh0aGlzKTtcclxuICAgICAgICBpZiAoIW15VmFsaWRhdGVGb3JtKF9mb3JtKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBfZGF0YSA9IF9mb3JtLnNlcmlhbGl6ZU9iamVjdCgpO1xyXG4gICAgICAgIFNlbmRBamF4KFwiU0VORF9GT1JNXCIsIF9kYXRhLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBfZm9ybS5odG1sKGRhdGEuaHRtbCk7XHJcbi8vICAgICAgICAgICAgc2VuZFlhbmRleEdvYWwoZGF0YVtcIkdPQUxcIl0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAkKFwiYm9keVwiKS5vbihcImJsdXJcIiwgXCIuanMtZm9ybS1zdWJtaXQgaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfZm9ybSA9ICQodGhpcykuY2xvc2VzdChcIi5qcy1mb3JtLXN1Ym1pdFwiKTtcclxuICAgICAgICBpZiAoIW15VmFsaWRhdGVGb3JtKF9mb3JtKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
